{% extends "base.html" %}

{% block app_content %}
    <table class="table table-hover">
        <tr>
            <td>
                <h3>Candidates:</h3>
                <table width="100%">
                    <tr>
                        <th>Cand ID</th>
                        <th>Glon</th>
                        <th>Glat</th>
                        <th>Source ID</th>
                        <th>etas</th>
                        <th>etas_threshold</th>
                        <th>rf_score</th>
                        <th>eta_residual</th>
                    </tr>
                {% for cand in cands.items %}
                    <tr>
                        <td>{{ "%s" % cand.id}}</td>
                        <td>{{ "%.5f" % cand.glon }}</td>
                        <td>{{ "%.5f" % cand.glat }}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        {% for source_id, eta, eta_thresh, eta_residual in zip(cand.source_ids, cand.etas, cand.eta_thresholds, cand.eta_residuals) %}
                            <td></td>
                            <td></td>
                            <td></td>
                            <td><a href="{{ url_for('source', sourceid=source_id) }}">{{ source_id }}</a></td>
                            <td>{{ "%.5f" % eta }}</td>
                            <td>{{ "%.5f" % eta_thresh }}</td>
                            {% if rf_score is float %}
                                <td>{{ "%.5f" % rf_score }}</td>
                            {%  else %}
                                <td>{{ "None" }}</td>
                            {% endif %}
                            <td>{{ "%.5f" % eta_residual }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
                </table>
                <!-- Pagination Links-->
                <div class="text-right">
                    <a href="{{ url_for('candidates', page=cands.prev_num) }}"
                       class="btn btn-outline-dark
                       {% if cands.page == 1 %}disabled{% endif %}">
                        &laquo;
                    </a><!-- Loop through the number of pages to display a link for each-->
                    {% for page_num in cands.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}{% if page_num %}
                <!-- Check for the active page and set the link to "Active"-->
                            {% if cands.page == page_num %}
                            <a href="{{ url_for('candidates', page=page_num) }}"
                               class="btn btn-dark">
                                {{ page_num }}
                            </a>
                            {% else %}
                            <a href="{{ url_for('candidates', page=page_num) }}"
                               class="btn btn-outline-dark">
                                {{ page_num }}
                            </a>
                            {% endif %}
                        {% else %}
                            ...
                        {% endif %}
                    {% endfor %}    <a href="{{ url_for('candidates', page=cands.next_num) }}"
                       class="btn btn-outline-dark
                       {% if cands.page == cands.pages %}disabled{% endif %}">
                        &raquo;
                    </a>
                </div>
                <p class="text-right mt-3">
                   Showing page {{ cands.page }} of {{ cands.pages }}
                </p>
            </td>
        </tr>
    </table>
{% endblock %}