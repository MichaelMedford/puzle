{% extends "base.html" %}

{% block app_content %}
    <table class="table table-hover">
        <tr>
            <td>
                <tr>
                    <h1>User: {{ user.username }}</h1>
                    <h5>About Me:</h5>
                    {% if user.about_me %}<p>{{ user.about_me }}</p>{% endif %}
                    {% if user.last_seen %}<p>Last seen on: {{ user.last_seen }}</p>{% endif %}
                    {% if user == current_user %}
                    <p><a href="{{ url_for('edit_profile') }}">Edit your profile</a></p>
                    {% endif %}
                </tr>
                <tr>
                    <h3>My Sources:</h3>
                    {% for source in sources.items %}
                        <p>
                        <hr>
                        <img src="{{ url_for('static', filename='source/') }}{{ source.id }}/lightcurve.png" width="300"> <a href="{{ url_for('source', sourceid=source.id) }}">Source {{ source.id }}</a>
                        </p>
                    {% endfor %}
                </tr>
            </td>
        </tr>
    <tr>
        <!-- Pagination Links-->
        <div class="text-right">
            <a href="{{ url_for('user', username=user.username, page=sources.prev_num) }}"
               class="btn btn-outline-dark
               {% if sources.page == 1 %}disabled{% endif %}">
                &laquo;
            </a><!-- Loop through the number of pages to display a link for each-->
            {% for page_num in sources.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}{% if page_num %}
        <!-- Check for the active page and set the link to "Active"-->
                    {% if sources.page == page_num %}
                    <a href="{{ url_for('user', username=user.username, page=page_num) }}"
                       class="btn btn-dark">
                        {{ page_num }}
                    </a>
                    {% else %}
                    <a href="{{ url_for('user', username=user.username, page=page_num) }}"
                       class="btn btn-outline-dark">
                        {{ page_num }}
                    </a>
                    {% endif %}
                {% else %}
                    ...
                {% endif %}
            {% endfor %}    <a href="{{ url_for('user', username=user.username, page=sources.next_num) }}"
               class="btn btn-outline-dark
               {% if sources.page == sources.pages %}disabled{% endif %}">
                &raquo;
            </a>
            <p class="text-right mt-3">
               Showing page {{ sources.page }} of {{ sources.pages }}
            </p>
        </div>
    </tr>
    </table>
{% endblock %}